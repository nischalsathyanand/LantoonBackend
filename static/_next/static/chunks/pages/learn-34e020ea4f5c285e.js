(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[128],{7003:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/learn",function(){return l(3060)}])},3060:function(e,t,l){"use strict";l.r(t);var s=l(5893),r=l(1664),o=l.n(r),n=l(7294),a=l(8816),i=l(8402),c=l(9275),u=l(9395),d=l(1163),x=l(8650),b=l(2282),f=l(5043),g=l(9500);let TileIcon=e=>{let{tileType:t,status:l}=e;switch(t){case"star":return"COMPLETE"===l?(0,s.jsx)(a.uo,{}):"ACTIVE"===l?(0,s.jsx)(a.Uh,{}):(0,s.jsx)(a.w7,{});case"book":return"COMPLETE"===l?(0,s.jsx)(a.bg,{}):"ACTIVE"===l?(0,s.jsx)(a.X1,{}):(0,s.jsx)(a.hw,{});case"dumbbell":return"COMPLETE"===l?(0,s.jsx)(a.c6,{}):"ACTIVE"===l?(0,s.jsx)(a.PV,{}):(0,s.jsx)(a.kM,{});case"fast-forward":return"COMPLETE"===l?(0,s.jsx)(a.uo,{}):"ACTIVE"===l?(0,s.jsx)(a.Uh,{}):(0,s.jsx)(a.hG,{});case"treasure":return"COMPLETE"===l?(0,s.jsx)(a.Vk,{}):"ACTIVE"===l?(0,s.jsx)(a.Yh,{}):(0,s.jsx)(a.Yy,{});case"trophy":return"COMPLETE"===l?(0,s.jsx)(a.Jj,{}):"ACTIVE"===l?(0,s.jsx)(a.XD,{}):(0,s.jsx)(a.Pz,{})}},p=["left-0","left-[-45px]","left-[-70px]","left-[-45px]","left-0","left-[45px]","left-[70px]","left-[45px]"],getTileLeftClassName=e=>{var t;let{index:l,unitNumber:s,tilesLength:r}=e;if(l>=r-1)return"left-0";let o=s%2==1?p:[...p.slice(4),...p.slice(0,4)];return null!==(t=o[l%o.length])&&void 0!==t?t:"left-0"},h=[140,95,70,95,140,185,210,185],getTileTooltipLeftOffset=e=>{var t;let{index:l,unitNumber:s,tilesLength:r}=e;if(l>=r-1)return h[0];let o=s%2==1?h:[...h.slice(4),...h.slice(0,4)];return null!==(t=o[l%o.length])&&void 0!==t?t:h[0]},getTileColors=e=>{let{tileType:t,status:l,defaultColors:s}=e;switch(l){case"LOCKED":if("fast-forward"===t)return s;return"border-[#b7b7b7] bg-[#e5e5e5]";case"COMPLETE":return"border-yellow-500 bg-yellow-400";case"ACTIVE":return s}},TileTooltip=e=>{var t,l;let{selectedTile:r,index:a,unitNumber:i,tilesLength:c,description:u,status:d,closeTooltip:x,unit:b}=e,f=(0,n.useRef)(null);(0,n.useEffect)(()=>{let containsTileTooltip=e=>{var t;if(r!==a)return;let l=null===(t=f.current)||void 0===t?void 0:t.contains(e.target);l||x()};return window.addEventListener("click",containsTileTooltip,!0),()=>window.removeEventListener("click",containsTileTooltip,!0)},[r,f,x,a]);let g=null!==(t=null==b?void 0:b.backgroundColor)&&void 0!==t?t:"bg-green-500",p=null!==(l=null==b?void 0:b.textColor)&&void 0!==l?l:"text-green-500";return(0,s.jsx)("div",{className:["relative h-0 w-full",a===r?"":"invisible"].join(" "),ref:f,children:(0,s.jsxs)("div",{className:["absolute z-30 flex w-[300px] flex-col gap-4 rounded-xl p-4 font-bold transition-all duration-300","ACTIVE"===d?g:"LOCKED"===d?"border-2 border-gray-200 bg-gray-100":"bg-yellow-400",a===r?"top-4 scale-100":"-top-14 scale-0"].join(" "),style:{left:"calc(50% - 150px)"},children:[(0,s.jsx)("div",{className:["absolute left-[140px] top-[-8px] h-4 w-4 rotate-45","ACTIVE"===d?g:"LOCKED"===d?"border-l-2 border-t-2 border-gray-200 bg-gray-100":"bg-yellow-400"].join(" "),style:{left:getTileTooltipLeftOffset({index:a,unitNumber:i,tilesLength:c})}}),(0,s.jsx)("div",{className:["text-lg","ACTIVE"===d?"text-white":"LOCKED"===d?"text-gray-400":"text-yellow-600"].join(" "),children:u}),"ACTIVE"===d?(0,s.jsx)("button",{onClick:()=>{console.log("hello"),console.log(b.lessons[a]),localStorage.setItem("selectedLesson",JSON.stringify(b.lessons[a])),window.location.href="/lesson"},className:["flex w-full items-center justify-center rounded-xl border-b-4 border-gray-200 bg-white p-3 uppercase",p].join(" "),children:"Start +10 XP"}):"LOCKED"===d?(0,s.jsx)("button",{className:"w-full rounded-xl bg-gray-200 p-3 uppercase text-gray-400",disabled:!0,children:"Locked"}):(0,s.jsx)(o(),{href:"/lesson",className:"flex w-full items-center justify-center rounded-xl border-b-4 border-yellow-200 bg-white p-3 uppercase text-yellow-400",children:"Practice +5 XP"})]})})},UnitSection=e=>{let{unit:t,lessonProgress:l}=e,r=(0,d.useRouter)(),[o,a]=(0,n.useState)(null);(0,n.useEffect)(()=>{let unselectTile=()=>a(null);return window.addEventListener("scroll",unselectTile),()=>window.removeEventListener("scroll",unselectTile)},[]);let i=(0,n.useCallback)(()=>a(null),[]),c=(0,b.w)(e=>e.lessonsCompleted),u=(0,b.w)(e=>e.increaseLessonsCompleted),x=(0,b.w)(e=>e.increaseLingots),f=!1,tileStatus2=e=>{for(let t of l)if(t===e.id)return"COMPLETE";return f?"LOCKED":(f=!0,"ACTIVE")};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(UnitHeader,{unitNumber:t.order,description:t.title,backgroundColor:t.backgroundColor,borderColor:t.borderColor}),(0,s.jsx)("div",{className:"relative mb-8 mt-[67px] flex max-w-2xl flex-col items-center gap-4",children:t.lessons.map((e,l)=>{let d=tileStatus2(e);return(0,s.jsxs)(n.Fragment,{children:[(()=>{switch(e.lessonType){case"star":case"book":case"dumbbell":case"trophy":case"fast-forward":if("trophy"===e.lessonType&&"COMPLETE"===d)return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(TileIcon,{tileType:e.lessonType,status:d}),(0,s.jsx)("div",{className:"absolute left-0 right-0 top-6 flex justify-center text-lg font-bold text-yellow-700",children:t.unitNumber})]});return(0,s.jsxs)("div",{className:["relative -mb-4 h-[93px] w-[98px]",getTileLeftClassName({index:l,unitNumber:t.unitNumber,tilesLength:t.lessons.length})].join(" "),children:["fast-forward"===e.lessonType&&"LOCKED"===d?(0,s.jsx)(HoverLabel,{text:"Jump here?",textColor:t.textColor}):o!==l&&"ACTIVE"===d?(0,s.jsx)(HoverLabel,{text:"Start",textColor:t.textColor}):null,(0,s.jsx)(LessonCompletionSvg,{lessonsCompleted:c,status:d}),(0,s.jsxs)("button",{className:["absolute m-3 rounded-full border-b-8 p-4",getTileColors({tileType:e.lessonType,status:d,defaultColors:"".concat(t.borderColor," ").concat(t.backgroundColor)})].join(" "),onClick:()=>{if("fast-forward"===e.lessonType&&"LOCKED"===d){r.push("/lesson?fast-forward=".concat(t.unitNumber));return}a(l)},children:[(0,s.jsx)(TileIcon,{tileType:e.lessonType,status:d}),(0,s.jsx)("span",{className:"sr-only",children:"Show lesson"})]})]});case"treasure":return(0,s.jsxs)("div",{className:["relative -mb-4",getTileLeftClassName({index:l,unitNumber:t.unitNumber,tilesLength:t.lessons.length})].join(" "),onClick:()=>{"ACTIVE"===d&&(u(4),x(1))},role:"button",tabIndex:"ACTIVE"===d?0:void 0,"aria-hidden":"ACTIVE"!==d,"aria-label":"ACTIVE"===d?"Collect reward":"",children:["ACTIVE"===d&&(0,s.jsx)(HoverLabel,{text:"Open",textColor:"text-yellow-400"}),(0,s.jsx)(TileIcon,{tileType:e.lessonType,status:d})]})}})(),(0,s.jsx)(TileTooltip,{selectedTile:o,index:l,unitNumber:t.unitNumber,tilesLength:t.lessons.length,description:e.title,status:d,closeTooltip:i,unit:t})]},l)})})]})},getTopBarColors=e=>{var t,l;let s={backgroundColor:"bg-[#58cc02]",borderColor:"border-[#46a302]"};return e<680?s:e<1830?null!==(t=f.D[1])&&void 0!==t?t:s:null!==(l=f.D[2])&&void 0!==l?l:s};t.default=()=>{let{loginScreenState:e,setLoginScreenState:t}=(0,x.rJ)(),[l,r]=(0,n.useState)(null),[d,b]=(0,n.useState)(0);(0,n.useEffect)(()=>{let updateScrollY=()=>{var e;return b(null!==(e=globalThis.scrollY)&&void 0!==e?e:d)};return updateScrollY(),document.addEventListener("scroll",updateScrollY),()=>document.removeEventListener("scroll",updateScrollY)},[d]),(0,n.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("selectedLanguage"));e?r(e):window.location.href="/register"},[]);let[f,p]=(0,n.useState)([]),[h,m]=(0,n.useState)([]),loadData=async()=>{let e=localStorage.getItem("token");if(e&&l){let t=await (0,g.Uo)(e,l.id);console.log(t),p(t);let s=await (0,g.AE)(e,l.id);console.log(s);let r=s.map(e=>e.lesson);console.log(r),m(r),p(t)}};(0,n.useEffect)(()=>{loadData()},[l]);let j=getTopBarColors(d);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u._,{selectedTab:"Learn"}),(0,s.jsxs)("div",{className:" md:ml-24 lg:ml-64 lg:gap-12 just",children:[(0,s.jsx)(i.D,{backgroundColor:j.backgroundColor,borderColor:j.borderColor}),(0,s.jsx)("div",{className:"flex justify-center gap-3 pt-14 sm:p-6 sm:pt-10",children:(0,s.jsxs)("div",{className:"flex max-w-2xl grow flex-col",children:[f.map(e=>(0,s.jsx)(UnitSection,{unit:e,lessonProgress:h},e.order)),(0,s.jsxs)("div",{className:"sticky bottom-28 left-0 right-0 flex items-end justify-between",children:[(0,s.jsxs)(o(),{href:"/lesson?practice",className:"absolute left-4 flex h-16 w-16 items-center justify-center rounded-full border-2 border-b-4 border-gray-200 bg-white transition hover:bg-gray-50 hover:brightness-90 md:left-0",children:[(0,s.jsx)("span",{className:"sr-only",children:"Practice exercise"}),(0,s.jsx)(a.MW,{className:"h-8 w-8"})]}),d>100&&(0,s.jsxs)("button",{className:"absolute right-4 flex h-14 w-14 items-center justify-center self-end rounded-2xl border-2 border-b-4 border-gray-200 bg-white transition hover:bg-gray-50 hover:brightness-90 md:right-0",onClick:()=>scrollTo(0,0),children:[(0,s.jsx)("span",{className:"sr-only",children:"Jump to top"}),(0,s.jsx)(a.MQ,{})]})]})]})})]}),(0,s.jsx)(c._,{selectedTab:"Learn"}),(0,s.jsx)(x.cf,{loginScreenState:e,setLoginScreenState:t})]})};let LessonCompletionSvg=e=>{let{lessonsCompleted:t,status:l,style:r={}}=e;if("ACTIVE"!==l)return null;switch(t%4){case 0:return(0,s.jsx)(a.Ey,{style:r});case 1:return(0,s.jsx)(a.lX,{style:r});case 2:return(0,s.jsx)(a.lM,{style:r});case 3:return(0,s.jsx)(a.cI,{style:r});default:return null}},HoverLabel=e=>{var t;let{text:l,textColor:r}=e,o=(0,n.useRef)(null),[a,i]=(0,n.useState)(72);return(0,n.useEffect)(()=>{var e,t;i(null!==(t=null===(e=o.current)||void 0===e?void 0:e.clientWidth)&&void 0!==t?t:a)},[null===(t=o.current)||void 0===t?void 0:t.clientWidth,a]),(0,s.jsxs)("div",{className:"absolute z-10 w-max animate-bounce rounded-lg border-2 border-gray-200 bg-white px-3 py-2 font-bold uppercase ".concat(r),style:{top:"-25%",left:"calc(50% - ".concat(a/2,"px)")},ref:o,children:[l,(0,s.jsx)("div",{className:"absolute h-3 w-3 rotate-45 border-b-2 border-r-2 border-gray-200 bg-white",style:{left:"calc(50% - 8px)",bottom:"-8px"}})]})},UnitHeader=e=>{let{unitNumber:t,description:l,backgroundColor:r,borderColor:o}=e;return(0,b.w)(e=>e.language),(0,s.jsx)("article",{className:["max-w-2xl text-white sm:rounded-xl",r].join(" "),children:(0,s.jsx)("header",{className:"flex items-center justify-between gap-4 p-4",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold",children:["Unit ",t]}),(0,s.jsx)("p",{className:"text-lg",children:l})]})})})}}},function(e){e.O(0,[664,154,816,650,286,774,888,179],function(){return e(e.s=7003)}),_N_E=e.O()}]);