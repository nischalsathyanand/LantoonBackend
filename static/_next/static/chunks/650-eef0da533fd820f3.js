"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[650],{8650:function(e,t,a){a.d(t,{cf:function(){return LoginScreen},rJ:function(){return useLoginScreen}});var n=a(5893),r=a(1664),o=a.n(r),s=a(8816),i=a(7294),c=a(2282),l=a(1163),d=a(9500);let useLoginScreen=()=>{let e=(0,l.useRouter)(),t=(0,c.w)(e=>e.loggedIn),a=t?"HIDDEN":"login"in e.query?"LOGIN":"sign-up"in e.query?"SIGNUP":"HIDDEN",[n,r]=(0,i.useState)(a);return(0,i.useEffect)(()=>r(a),[a]),{loginScreenState:n,setLoginScreenState:r}},LoginScreen=e=>{let{loginScreenState:t,setLoginScreenState:a}=e,r=(0,l.useRouter)(),u=(0,c.w)(e=>e.loggedIn),g=(0,c.w)(e=>e.logIn),p=(0,c.w)(e=>e.setUsername);(0,c.w)(e=>e.setName);let[m,h]=(0,i.useState)(!1),x=(0,i.useRef)(null);(0,i.useRef)(null);let y=(0,i.useRef)(null),f=(0,i.useRef)(null),[v,w]=(0,i.useState)("");(0,i.useEffect)(()=>{"HIDDEN"!==t&&u&&a("HIDDEN")},[t,u,a]);let handleRegister=async(e,t,a)=>{try{let n=await (0,d.z2)({name:e,username:e,password:a,email:t});localStorage.setItem("token",n.token),console.log("Registration successful"),g(),console.log(u),r.push("/learn")}catch(e){console.error("Registration failed:",e.response.data.error),w(e.response.data.error)}},handleLogin=async(e,t)=>{try{let a=await (0,d.x4)({username:e,password:t});localStorage.setItem("token",a.token),g(),p(e),console.log(u),console.log("Login successful"),r.push("/learn")}catch(e){console.error("Registration failed:",e.response.data.error),w(e.response.data.error)}};return(0,n.jsxs)("article",{className:["fixed inset-0 z-30 flex flex-col bg-white p-7 transition duration-300","HIDDEN"===t?"pointer-events-none opacity-0":"opacity-100"].join(" "),"aria-hidden":!t,children:[(0,n.jsxs)("header",{className:"flex flex-row-reverse justify-between sm:flex-row",children:[(0,n.jsxs)("button",{className:"flex text-gray-400",onClick:()=>a("HIDDEN"),children:[(0,n.jsx)(s.sZ,{}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]}),(0,n.jsx)("button",{className:"hidden rounded-2xl border-2 border-b-4 border-gray-200 px-4 py-3 text-sm font-bold uppercase text-blue-400 transition hover:bg-gray-50 hover:brightness-90 sm:block",onClick:()=>a(e=>"LOGIN"===e?"SIGNUP":"LOGIN"),children:"LOGIN"===t?"Sign up":"Login"})]}),(0,n.jsx)("div",{className:"flex grow items-center justify-center",children:(0,n.jsxs)("div",{className:"flex w-full flex-col gap-5 sm:w-96",children:[(0,n.jsx)("h2",{className:"text-center text-2xl font-bold text-gray-800",children:"LOGIN"===t?"Log in":"Create your profile"}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 text-black",children:["SIGNUP"===t&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("input",{className:"grow rounded-2xl border-2 border-gray-200 bg-gray-50 px-4 py-3",placeholder:"Username",ref:x})}),(0,n.jsx)("input",{className:"grow rounded-2xl border-2 border-gray-200 bg-gray-50 px-4 py-3",placeholder:"LOGIN"===t?"Username":"Email",ref:y}),(0,n.jsxs)("div",{className:"relative flex grow",children:[(0,n.jsx)("input",{className:"grow rounded-2xl border-2 border-gray-200 bg-gray-50 px-4 py-3",placeholder:"Password",type:"password",ref:f}),"LOGIN"===t&&(0,n.jsx)("div",{className:"absolute bottom-0 right-0 top-0 flex items-center justify-center pr-5",children:(0,n.jsx)(o(),{className:"font-bold uppercase text-gray-400 hover:brightness-75",href:"/forgot-password",children:"Forgot?"})})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-red-500",children:v})}),(0,n.jsx)("button",{className:"rounded-2xl border-b-4 border-blue-500 bg-blue-400 py-3 font-bold uppercase text-white transition hover:brightness-110",onClick:()=>{var e,a,n;let r=(null===(e=x.current)||void 0===e?void 0:e.value.trim())||null,o=(null===(a=y.current)||void 0===a?void 0:a.value.trim())||null,s=(null===(n=f.current)||void 0===n?void 0:n.value)||null;"LOGIN"===t?handleLogin(o,s):handleRegister(r,o,s)},children:"LOGIN"===t?"Log in":"Create account"}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("div",{className:"h-[2px] grow bg-gray-300"})}),(0,n.jsxs)("p",{className:"text-center text-xs leading-5 text-gray-400",children:["By signing in to Lantoon, you agree to our"," ",(0,n.jsx)(o(),{className:"font-bold",href:"https://www.duolingo.com/terms?wantsPlainInfo=1",children:"Terms"})," ","and"," ",(0,n.jsx)(o(),{className:"font-bold",href:"https://www.duolingo.com/privacy?wantsPlainInfo=1",children:"Privacy Policy"}),"."]}),(0,n.jsxs)("p",{className:"block text-center sm:hidden",children:[(0,n.jsx)("span",{className:"text-sm font-bold text-gray-700",children:"LOGIN"===t?"Don't have an account?":"Have an account?"})," ",(0,n.jsx)("button",{className:"text-sm font-bold uppercase text-blue-400",onClick:()=>a(e=>"LOGIN"===e?"SIGNUP":"LOGIN"),children:"LOGIN"===t?"sign up":"log in"})]})]})})]})}},2282:function(e,t,a){a.d(t,{w:function(){return l}});var n=a(4529);let createGoalXpSlice=e=>({goalXp:10,setGoalXp:t=>e({goalXp:t})});var r=a(6947);let createLanguageSlice=e=>({language:r.Z[6],setLanguage:t=>e({language:t})});var o=a(5043);let createLessonSlice=e=>({lessonsCompleted:0,increaseLessonsCompleted:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(e=>{let{lessonsCompleted:a}=e;return{lessonsCompleted:a+t}})},jumpToUnit:t=>e(e=>{let{lessonsCompleted:a}=e,n=o.D.filter(e=>e.unitNumber<t).map(e=>4*e.tiles.length).reduce((e,t)=>e+t,0);return{lessonsCompleted:Math.max(a,n)}})}),createLingotSlice=e=>({lingots:0,increaseLingots:t=>e(e=>{let{lingots:a}=e;return{lingots:a+t}})}),createSoundSettingsSlice=e=>({soundEffects:!0,speakingExercises:!0,listeningExercises:!0,setSoundEffects:t=>e(()=>({soundEffects:t})),setSpeakingExercises:t=>e(()=>({speakingExercises:t})),setListeningExercises:t=>e(()=>({listeningExercises:t}))});var s=a(7484),i=a.n(s);let toDateString=e=>e.format("YYYY-MM-DD"),addActiveDay=(e,t)=>new Set([...e,toDateString(t)]),isActiveDay=(e,t)=>e.has(toDateString(t)),getCurrentStreak=e=>{let t=0,a=i()();for(;isActiveDay(e,a);)a=a.add(-1,"day"),t+=1;return t},createStreakSlice=(e,t)=>({activeDays:new Set,streak:0,isActiveDay:e=>isActiveDay(t().activeDays,e),addToday:()=>{let a=addActiveDay(t().activeDays,i()());e({activeDays:a,streak:getCurrentStreak(a)})}}),createUserSlice=e=>({name:"",username:"",joinedAt:i()(),loggedIn:!1,setName:t=>e(()=>({name:t})),setUsername:t=>e(()=>({username:t})),logIn:()=>e(()=>({loggedIn:!0})),logOut:()=>e(()=>({loggedIn:!1}))});var c=a(8399);let addXpToday=(e,t)=>addXp(e,t,i()()),addXp=(e,t,a)=>({...e,[toDateString(a)]:xpAt(e,a)+t}),xpAt=(e,t)=>{var a;return null!==(a=e[toDateString(t)])&&void 0!==a?a:0},createXpSlice=(e,t)=>({xpByDate:{},increaseXp:a=>e({xpByDate:addXpToday(t().xpByDate,a)}),xpToday:()=>xpAt(t().xpByDate,i()()),xpThisWeek:()=>(0,c.S)((0,c.w)(0,i()().day()+1).map(e=>xpAt(t().xpByDate,i()().add(-e))))}),l=(0,n.Ue)(function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return{...createGoalXpSlice(...t),...createLanguageSlice(...t),...createLessonSlice(...t),...createLingotSlice(...t),...createSoundSettingsSlice(...t),...createStreakSlice(...t),...createUserSlice(...t),...createXpSlice(...t)}})},9500:function(e,t,a){a.d(t,{AE:function(){return getUserLessonProgress},Uo:function(){return getChapters},Vb:function(){return getLanguages},_P:function(){return setUserLessonProgress},hJ:function(){return setUserLanguage},jg:function(){return getAccountDetails},tI:function(){return getQuestions},x4:function(){return login},z2:function(){return register},z_:function(){return getUserLanguages}});var n=a(6154);let r=n.Z.create({baseURL:"http://127.0.0.1:8000",headers:{"Content-Type":"application/json"}}),register=async e=>{try{let t=await r.post("/api/auth/register/",e);return t.data}catch(e){throw e}},login=async e=>{try{let t=await r.post("/api/auth/login/",e);return console.log(t),t.data}catch(e){throw e}},getAccountDetails=async e=>{try{let t=await r.get("/api/auth/user/",{headers:{Authorization:"Token ".concat(e)}});return t.data}catch(e){throw e}},getLanguages=async e=>{try{let t=await r.get("/api/content/languages",{headers:{Authorization:"Token ".concat(e)}});return console.log(t),t.data}catch(e){throw e}},getUserLanguages=async e=>{try{let t=await r.get("/api/learning/languages",{headers:{Authorization:"Token ".concat(e)}});return t.data}catch(e){throw e}},setUserLanguage=async(e,t)=>{try{let a=await r.post("/api/learning/languages/create/",{language_id:t},{headers:{Authorization:"Token ".concat(e)}});return a.data}catch(e){throw e}},getChapters=async(e,t)=>{try{let a=await r.get("/api/content/languages/".concat(t,"/chapters"),{headers:{Authorization:"Token ".concat(e)}});return a.data}catch(e){throw e}},getQuestions=async(e,t)=>{try{let a=await r.get("/api/content/lessons/".concat(t,"/questions/"),{headers:{Authorization:"Token ".concat(e)}});return a.data}catch(e){throw e}},setUserLessonProgress=async(e,t)=>{try{let a=await r.post("/api/learning/lesson-progress/create/",{lesson_id:t},{headers:{Authorization:"Token ".concat(e)}});return a.data}catch(e){throw e}},getUserLessonProgress=async(e,t)=>{try{let a=await r.get("/api/learning/lesson-progress/".concat(t,"/"),{headers:{Authorization:"Token ".concat(e)}});return a.data}catch(e){throw e}}},8399:function(e,t,a){a.d(t,{S:function(){return sum},w:function(){return range}});let range=(e,t)=>{let a=Array(t-e);for(let n=e;n<t;n++)a[n-e]=n;return a},sum=e=>{let t=0;for(let a of e)t+=a;return t}},6947:function(e,t){t.Z=[{name:"Arabic",nativeName:"العربية",viewBox:"0 2178 82 66",code:"ar"},{name:"Bengali",nativeName:"বাংলা",viewBox:"0 1914 82 66",code:"bn"},{name:"Czech",nativeName:"Čeština",viewBox:"0 1848 82 66",code:"cs"},{name:"German",nativeName:"Deutsch",viewBox:"0 198 82 66",code:"de"},{name:"Greek",nativeName:"Ελληνικά",viewBox:"0 924 82 66",code:"el"},{name:"English",nativeName:"English",viewBox:"0 0 82 66",code:"en"},{name:"Spanish",nativeName:"Espa\xf1ol",viewBox:"0 66 82 66",code:"es"},{name:"French",nativeName:"Fran\xe7ais",viewBox:"0 132 82 66",code:"fr"},{name:"Hindi",nativeName:"हिंदी",viewBox:"0 1914 82 66",code:"hi"},{name:"Hungarian",nativeName:"Magyar",viewBox:"0 1584 82 66",code:"hu"},{name:"Indonesian",nativeName:"Bahasa Indonesia",viewBox:"0 1980 82 66",code:"id"},{name:"Italian",nativeName:"Italiano",viewBox:"0 330 82 66",code:"it"},{name:"Japanese",nativeName:"日本語",viewBox:"0 264 82 66",code:"ja"},{name:"Korean",nativeName:"한국어",viewBox:"0 396 82 66",code:"ko"},{name:"Dutch",nativeName:"Nederlands",viewBox:"0 726 82 66",code:"code-NL"},{name:"Polish",nativeName:"Polski",viewBox:"0 1056 82 66",code:"pl"},{name:"Portuguese",nativeName:"Portugu\xeas",viewBox:"0 594 82 66",code:"pt"},{name:"Romanian",nativeName:"Rom\xe2nă",viewBox:"0 1386 82 66",code:"ro"},{name:"Russian",nativeName:"Русский",viewBox:"0 528 82 66",code:"ru"},{name:"Thai",nativeName:"ภาษาไทย",viewBox:"0 2310 82 66",code:"th"},{name:"Tagalog",nativeName:"Tagalog",viewBox:"0 3036 82 66",code:"tl"},{name:"Turkish",nativeName:"T\xfcrk\xe7e",viewBox:"0 660 82 66",code:"tr"},{name:"Ukrainian",nativeName:"Українською",viewBox:"0 1716 82 66",code:"uk"},{name:"Vietnamese",nativeName:"Tiếng Việt",viewBox:"0 1188 82 66",code:"vi"},{name:"Chinese",nativeName:"中文",viewBox:"0 462 82 66",code:"code-CN"}]},5043:function(e,t,a){a.d(t,{D:function(){return n}});let n=[{unitNumber:1,description:"Form basic sentences, greet people",backgroundColor:"bg-[#58cc02]",textColor:"text-[#58cc02]",borderColor:"border-[#46a302]",tiles:[{type:"star",description:"Form basic sentences"},{type:"book",description:"Good morning"},{type:"star",description:"Greet people"},{type:"treasure"},{type:"book",description:"A date"},{type:"trophy",description:"Unit 1 review"}]},{unitNumber:2,description:"Get around in a city",backgroundColor:"bg-[#ce82ff]",textColor:"text-[#ce82ff]",borderColor:"border-[#a568cc]",tiles:[{type:"fast-forward",description:"Get around in a city"},{type:"dumbbell",description:"Personalized practice"},{type:"book",description:"One thing"},{type:"treasure"},{type:"star",description:"Get around in a city"},{type:"book",description:"A very big family"},{type:"star",description:"Greet people"},{type:"book",description:"The red jacket"},{type:"treasure"},{type:"dumbbell",description:"Personalized practice"},{type:"trophy",description:"Unit 2 review"}]},{unitNumber:3,description:"Order food and drink",backgroundColor:"bg-[#00cd9c]",textColor:"text-[#00cd9c]",borderColor:"border-[#00a47d]",tiles:[{type:"fast-forward",description:"Order food and drink"},{type:"book",description:"The passport"},{type:"star",description:"Order food and drinks"},{type:"treasure"},{type:"book",description:"The honeymoon"},{type:"star",description:"Get around in a city"},{type:"treasure"},{type:"dumbbell",description:"Personalized practice"},{type:"book",description:"Doctor Eddy"},{type:"trophy",description:"Unit 2 review"}]}]}}]);